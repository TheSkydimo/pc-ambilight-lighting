---
import { render, type CollectionEntry } from "astro:content";
import ContentPageLayout from "~/templates/ContentPageLayout.astro";
import type { Locale } from "~/i18n/config";

export interface Props {
  locale: Locale;
  pathname: string;
  entry: CollectionEntry<"guides">;
  labels: {
    tldr: string;
    updated: string;
    lastTested: string;
    toc: string;
    disclosureTitle: string;
  };
}

const { locale, pathname, entry, labels } = Astro.props;
const { Content, headings } = await render(entry);
---

<ContentPageLayout
  locale={locale}
  pathname={pathname}
  title={entry.data.title}
  description={entry.data.description}
  headings={headings}
  updatedAt={entry.data.updatedAt}
  lastTestedAt={entry.data.lastTestedAt}
  tldrLabel={labels.tldr}
  tldr={entry.data.tldr}
  disclosureTitle={labels.disclosureTitle}
  disclosure={undefined}
  metaLabels={{ updated: labels.updated, lastTested: labels.lastTested }}
  tocTitle={labels.toc}
>
  <Content />
</ContentPageLayout>

